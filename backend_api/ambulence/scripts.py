import requests
import json
import time

def UpdateLocation():
    waypoints = {
        "coordinates": [
           [78.158655, 29.945289], [78.158156, 29.945641], [78.158033, 29.945515], [78.157194, 29.946088], [78.157031, 29.945914], [78.156925, 29.94579], [78.156868, 29.945515], [78.156835, 29.945357], [78.156784, 29.945109], [78.156536, 29.945156], [78.156373, 29.945189], [78.156228, 29.945216], [78.155962, 29.945276], [78.155755, 29.944482], [78.155622, 29.944015], [78.155443, 29.943211], [78.155404, 29.943083], [78.155377, 29.942996], [78.155439, 29.942974], [78.155483, 29.942931], [78.155501, 29.942875], [78.155487, 29.942818], [78.155656, 29.942619], [78.155708, 29.942559], [78.156231, 29.941958], [78.156247, 29.941913], [78.156241, 29.941836], [78.156035, 29.941688], [78.155564, 29.94135], [78.15464, 29.940652], [78.154343, 29.940443], [78.154316, 29.94042], [78.154306, 29.94022], [78.154413, 29.940175], [78.154435, 29.940136], [78.154438, 29.940087], [78.154421, 29.940046], [78.154377, 29.940008], [78.154316, 29.939991], [78.154268, 29.939996], [78.154214, 29.940024], [78.153961, 29.939897], [78.153723, 29.939766], [78.152502, 29.938931], [78.151487, 29.938276], [78.151336, 29.938205], [78.151122, 29.938103], [78.150808, 29.937954], [78.150007, 29.937457], [78.147239, 29.935602], [78.146556, 29.935168], [78.143816, 29.933521], [78.142331, 29.932652], [78.141532, 29.932153], [78.140233, 29.931338], [78.138532, 29.930225], [78.137586, 29.929628], [78.137218, 29.92942], [78.136995, 29.929338], [78.136595, 29.929106], [78.134015, 29.927583], [78.132337, 29.926569], [78.13147, 29.926071], [78.129541, 29.925021], [78.127656, 29.924112], [78.125108, 29.923004], [78.121121, 29.921502], [78.115445, 29.919446], [78.114186, 29.919019], [78.113952, 29.91895], [78.113703, 29.918901], [78.113372, 29.918859], [78.11255, 29.918826], [78.111703, 29.91886], [78.11095, 29.918907], [78.110683, 29.918918], [78.110152, 29.91894], [78.108046, 29.918978], [78.107828, 29.918956], [78.107668, 29.91892], [78.1071, 29.918685], [78.106771, 29.918518], [78.105345, 29.917619], [78.104876, 29.917302], [78.104492, 29.917088], [78.104175, 29.916954], [78.103929, 29.916876], [78.103512, 29.916811], [78.103106, 29.916795], [78.102782, 29.916806], [78.100939, 29.916951], [78.100582, 29.916981], [78.100342, 29.916998], [78.099565, 29.917028], [78.09907, 29.91704], [78.098655, 29.917057], [78.097516, 29.917086], [78.095312, 29.917194], [78.089991, 29.917422], [78.084847, 29.917589], [78.084438, 29.917591], [78.083924, 29.917589], [78.083372, 29.917592], [78.082482, 29.917639], [78.082228, 29.917668], [78.081961, 29.917734], [78.081453, 29.91789], [78.080364, 29.918384], [78.080054, 29.918509], [78.079576, 29.918673], [78.079555, 29.918677], [78.079274, 29.918733], [78.079015, 29.918758], [78.07852, 29.918752], [78.078294, 29.918738], [78.077766, 29.918639], [78.077296, 29.918471], [78.076711, 29.918197], [78.076009, 29.9179], [78.075694, 29.917801], [78.075187, 29.917681], [78.07435, 29.917644], [78.073745, 29.917689], [78.071914, 29.917928], [78.071133, 29.918032], [78.070104, 29.918137], [78.068803, 29.918264], [78.066849, 29.918505], [78.065247, 29.918703], [78.065012, 29.918732], [78.064034, 29.918842], [78.063761, 29.918856], [78.062913, 29.918802], [78.062657, 29.918744], [78.062575, 29.918709], [78.062067, 29.918483], [78.061851, 29.918359], [78.061642, 29.918211], [78.061109, 29.917766], [78.060658, 29.917378], [78.059977, 29.916914], [78.059581, 29.916705], [78.059044, 29.91653], [78.058588, 29.916437], [78.057263, 29.91649], [78.056751, 29.916529], [78.055234, 29.9167], [78.05431, 29.916755], [78.053603, 29.916736], [78.052698, 29.916652], [78.052209, 29.916575], [78.051999, 29.916526], [78.051598, 29.916418], [78.05094, 29.916195], [78.050437, 29.91598], [78.049697, 29.915622], [78.048694, 29.915099], [78.04829, 29.914933], [78.047503, 29.914681], [78.045972, 29.914238], [78.045754, 29.914168], [78.045113, 29.913903], [78.044283, 29.913498], [78.04373, 29.913199], [78.0429, 29.912891], [78.041878, 29.912623], [78.041513, 29.912556], [78.038509, 29.911997], [78.037872, 29.911925], [78.037179, 29.911865], [78.036304, 29.911849], [78.035154, 29.911892], [78.034934, 29.911901], [78.033857, 29.911963], [78.033058, 29.912064], [78.032174, 29.912234], [78.031251, 29.912439], [78.029948, 29.912836], [78.028133, 29.913575], [78.027461, 29.913815], [78.027259, 29.91386], [78.027004, 29.913903], [78.026869, 29.913909], [78.026285, 29.913918], [78.02604, 29.913882], [78.02593, 29.91385], [78.02546, 29.913708], [78.025242, 29.91361], [78.023997, 29.912916], [78.023357, 29.912619], [78.022623, 29.912326], [78.021846, 29.911993], [78.020546, 29.911482], [78.01902, 29.911038], [78.018047, 29.910689], [78.017115, 29.910409], [78.015156, 29.909739], [78.013434, 29.909163], [78.011692, 29.908588], [78.011613, 29.908562], [78.008497, 29.907511], [78.007587, 29.907233], [78.007004, 29.907055], [78.006647, 29.906962], [78.002468, 29.905688], [78.001484, 29.905384], [77.999497, 29.904763], [77.997668, 29.904209], [77.997014, 29.904013], [77.995757, 29.903597], [77.991907, 29.902376], [77.99178, 29.902336], [77.990057, 29.901763], [77.989653, 29.901635], [77.989557, 29.901605], [77.988184, 29.901174], [77.985756, 29.900412], [77.985649, 29.900378], [77.985194, 29.900236], [77.982606, 29.899424], [77.979967, 29.89861], [77.978782, 29.898273], [77.978398, 29.89822], [77.978015, 29.898187], [77.977551, 29.898205], [77.977363, 29.89822], [77.976861, 29.898303], [77.976267, 29.898486], [77.97552, 29.89874], [77.975509, 29.898744], [77.972833, 29.899684], [77.971341, 29.900224], [77.970224, 29.900678], [77.969534, 29.900884], [77.969145, 29.90097], [77.968552, 29.901024], [77.968056, 29.901001], [77.96738, 29.900921], [77.966798, 29.900789], [77.966371, 29.90064], [77.965937, 29.900442], [77.965577, 29.900238], [77.965124, 29.899936], [77.964708, 29.899601], [77.964472, 29.899345], [77.96426, 29.89908], [77.964013, 29.898731], [77.963842, 29.898399], [77.963432, 29.897348], [77.962843, 29.896003], [77.962638, 29.895565], [77.961889, 29.894058], [77.96165, 29.893714], [77.961412, 29.893423], [77.961122, 29.893157], [77.960724, 29.892862], [77.960061, 29.892523], [77.959033, 29.892176], [77.958755, 29.892085], [77.958206, 29.891888], [77.958036, 29.891798], [77.957837, 29.891693], [77.957454, 29.891406], [77.957245, 29.891192], [77.957117, 29.891032], [77.956644, 29.891267], [77.956499, 29.891343], [77.956295, 29.891276], [77.949377, 29.889044], [77.946113, 29.888006], [77.945719, 29.88788], [77.945678, 29.887867], [77.942047, 29.886712], [77.936718, 29.885003], [77.935508, 29.884622], [77.932677, 29.883731], [77.931909, 29.88348], [77.930438, 29.883019], [77.929257, 29.882644], [77.928999, 29.882582], [77.928254, 29.882402], [77.927346, 29.882184], [77.926316, 29.881936], [77.92327, 29.881202], [77.922804, 29.88109], [77.919175, 29.880216], [77.918382, 29.880025], [77.917453, 29.879802], [77.916863, 29.87966], [77.915697, 29.879394], [77.915337, 29.879364], [77.914988, 29.87936], [77.914397, 29.879354], [77.913809, 29.879447], [77.913557, 29.879504], [77.912785, 29.879776], [77.911681, 29.880165], [77.909389, 29.880974], [77.909052, 29.881092], [77.908737, 29.881204], [77.908441, 29.881268], [77.907507, 29.881469], [77.907347, 29.881504], [77.906822, 29.881532], [77.906531, 29.881547], [77.906407, 29.881554], [77.906054, 29.881532], [77.904793, 29.881382], [77.904167, 29.881304], [77.903367, 29.881074], [77.90265, 29.880715], [77.902087, 29.880374], [77.901532, 29.879882], [77.900077, 29.878327], [77.899748, 29.878015], [77.898998, 29.877229], [77.898576, 29.876787], [77.897348, 29.8755], [77.896901, 29.875093], [77.89638, 29.87474], [77.896012, 29.874618], [77.895407, 29.874456], [77.895077, 29.874392], [77.894873, 29.874353], [77.894622, 29.874246], [77.894084, 29.87378], [77.894008, 29.873709], [77.893658, 29.873381], [77.893009, 29.872714], [77.892757, 29.872449], [77.892568, 29.872261], [77.892222, 29.871906], [77.891115, 29.870781], [77.890912, 29.870577], [77.890634, 29.870298], [77.890463, 29.870125], [77.890001, 29.86966], [77.889763, 29.86942], [77.889752, 29.869351], [77.889811, 29.869157], [77.889806, 29.869093], [77.889783, 29.8688], [77.889739, 29.868413], [77.889644, 29.867662], [77.889353, 29.865426], [77.88947, 29.865482], [77.889515, 29.865519], [77.88973, 29.865707], [77.890036, 29.866024], [77.890108, 29.866063], [77.890406, 29.866105], [77.890768, 29.866105], [77.890923, 29.866084], [77.891219, 29.866004], [77.891578, 29.865784], [77.891797, 29.865619], [77.891886, 29.86561], [77.891951, 29.865628], [77.89202, 29.865591], [77.892036, 29.865545], [77.892755, 29.865562], [77.893458, 29.865548], [77.893474, 29.865496], [77.893468, 29.865278], [77.893446, 29.864492], [77.893874, 29.864485]
        ],
        "type": "LineString"
    }
    total_time = 36*180
    x = len(waypoints["coordinates"])
    for i, coordinate in enumerate(waypoints["coordinates"]):
        
        print(i,coordinate[1])
        url = "http://10.61.24.165:8000/api/update-ambulance-location/"
        data = {
        "number_plate": "haridwar",
        "current_location_latitude": coordinate[1],  
        "current_location_longitude": coordinate[0], 
        
        }
        time.sleep(total_time/x)
        try:
            response = requests.put(url, json=data)

        
            if response.status_code == 200:
                print("Ambulance location updated successfully.")
            else:
                print("\n")
                print("\n")
                print("\n")

                print(response.content)

                print("\n")
                print("\n")
                print("\n")

                print("Failed to update ambulance location.")
                
        except:
            break


        

    

UpdateLocation()
