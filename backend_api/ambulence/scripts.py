import requests
import json
import time

def UpdateLocation():
    waypoints = {
        "coordinates": [
          [77.902242, 29.864865], [77.902229, 29.864859], [77.901875, 29.864692], [77.901768, 29.864789], [77.901468, 29.865222], [77.901337, 29.865358], [77.900952, 29.865077], [77.900921, 29.865009], [77.90089, 29.86499], [77.900885, 29.864957], [77.90084, 29.86492], [77.900797, 29.86492], [77.900778, 29.864928], [77.900695, 29.864896], [77.900269, 29.864604], [77.899832, 29.864319], [77.899372, 29.864073], [77.899189, 29.864052], [77.898686, 29.864054], [77.898651, 29.864055], [77.898492, 29.864058], [77.897921, 29.86407], [77.897806, 29.864072], [77.89731, 29.864081], [77.896897, 29.864088], [77.896129, 29.864063], [77.895838, 29.86408], [77.895709, 29.864064], [77.895608, 29.864036], [77.895451, 29.864042], [77.895398, 29.864012], [77.895317, 29.864029], [77.89529, 29.864063], [77.895149, 29.864059], [77.895088, 29.864091], [77.894981, 29.864096], [77.894398, 29.864145], [77.894207, 29.864145], [77.89387, 29.864152], [77.893436, 29.864161], [77.89336, 29.864157], [77.89284, 29.864203], [77.892587, 29.864237], [77.892505, 29.864224], [77.89225, 29.864281], [77.892221, 29.864263], [77.892185, 29.864263], [77.892147, 29.864293], [77.89216, 29.864348], [77.892176, 29.864358], [77.892162, 29.86455], [77.892193, 29.864602], [77.892193, 29.865041], [77.892148, 29.865155]],
        
        "type": "LineString"
    }
    total_time = 36*180
    x = len(waypoints["coordinates"])
    for i, coordinate in enumerate(waypoints["coordinates"]):
        
        print(i,coordinate[1])
        url = "http://10.61.24.165:8000/api/update-ambulance-location/"
        data = {
        "number_plate": "rustic",
        "current_location_latitude": coordinate[1],  
        "current_location_longitude": coordinate[0], 
        
        }
        time.sleep(1)
        try:
            response = requests.put(url, json=data)

        
            if response.status_code == 200:
                print("Ambulance location updated successfully.")
            else:
                print("\n")
                print("\n")
                print("\n")

                print(response.content)

                print("\n")
                print("\n")
                print("\n")

                print("Failed to update ambulance location.")
                
        except:
            break


        

    

UpdateLocation()
